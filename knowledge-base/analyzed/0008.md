# Finding 0008 Analysis

## Entries

### INT-LINK-TRANSCLUSION

**What happens:** Links are discoverable from ANY document that shares content identity with a link's endpoint — whether through transclusion, versioning, or chains of both. When content with a link is transcluded to another document, `find_links` on the copy returns the same link as on the source. When both endpoints of a link are transcluded content, all three documents (source origin, target origin, link document) can discover the link. This extends the INT-LINK-TRANSCLUSION entries from Findings 0004 and 0007 with multi-endpoint and chain scenarios.

**Why it matters for spec:** The link discovery specification `find_links(specset) = {link | content_ids(link.source) ∩ content_ids(specset) ≠ ∅ ∨ content_ids(link.target) ∩ content_ids(specset) ≠ ∅}` is confirmed to work bidirectionally and for links with transcluded endpoints. When both endpoints are transcluded, the link is findable from any document referencing either endpoint's content identities. The formal spec need not special-case multi-transclusion — the existing content-identity intersection rule handles it.

**Concrete example:**
- source_origin: "Clickable source text", target_origin: "Target destination text"
- link_doc: transcludes "Clickable" from source_origin and "Target" from target_origin
- Create link from "Clickable" to "Target" in link_doc
- `find_links(link_doc)` → [link_id]
- `find_links(source_origin)` → [link_id] (source_origin references the link's source content identity)
- `find_links(target_origin)` → [link_id] (target_origin references the link's target content identity)

**Code references:** Tests `transclude_linked_content`, `link_both_endpoints_transcluded`

**Provenance:** Finding 0008

### INV-TRANSITIVE-IDENTITY

**What happens:** Content identity transitivity, established in Findings 0002 (transclusion chains) and 0007 (version chains), holds for MIXED chains of versioning and transclusion. If C has content with a link, B is a version of C, and A transcludes from B, then A can discover C's link — even though A never interacted with C. The chain version→transclusion preserves content identity just as pure version or pure transclusion chains do.

**Why it matters for spec:** The invariant `shares_identity(A, B) ∧ shares_identity(B, C) ⟹ shares_identity(A, C)` is confirmed for heterogeneous chains (version + transclusion mixed). Since both ST-VERSION-CREATE and ST-VCOPY operate on the same content identity system (neither copies content, both share content identity references), mixed chains are a natural consequence. The formal spec needs no additional transitivity axiom for mixed chains — it falls out of the existing postconditions.

**Concrete example:**
- C: "Original content in C" — link on "content"
- B: version of C → B shares content identity with C
- A: transcludes from B → A shares content identity with B (and transitively with C)
- `find_links(C)` → [link_id]
- `find_links(B)` → [link_id]
- `find_links(A)` → [link_id] (A found C's link via B)

**Code references:** Test `transitive_link_discovery`

**Provenance:** Finding 0008

### INT-LINK-VERSION

**What happens:** Links added to a version are discoverable from the original document, and vice versa. If a link is created on a version (targeting content with shared identity), the original can discover that link through `find_links`. This is bidirectional — links created on either document are discoverable from both. This extends INT-LINK-TRANSCLUSION to confirm that link creation on a version has global visibility through content identity.

**Why it matters for spec:** The interaction property is: `version_of(orig, ver) ∧ create_link(ver, content_ids) ⟹ findable(link, orig)`. This is not a new axiom — it follows from ST-VERSION-CREATE (version shares content identity with original) and the content-identity-based link discovery rule. But the finding confirms the surprising consequence: creating a link in a private version makes it visible to anyone referencing the same content. The spec should note this as a semantic consequence rather than a special rule.

**Concrete example:**
- Original: "Shared content here"
- Version: version of Original → "Shared content here" (same content identities)
- Create link on "content" in Version
- `find_links(Version)` → [link_id]
- `find_links(Original)` → [link_id] (discovers link created in version)

**Code references:** Test `version_add_link_check_original`

**Provenance:** Finding 0008

### FC-LINK-PERSISTENCE

**What happens:** Links on transcluded content survive versioning of the containing document. When a document transcludes linked content and is then versioned, the version can discover the link. The link persists across the full chain: source document → transcluding document → version of transcluding document. This extends the FC-LINK-PERSISTENCE entry from Finding 0004 to combined transclusion+versioning scenarios.

**Why it matters for spec:** The frame condition `forall op in {version_create}, link : Link :: links(system_after) ⊇ links(system_before)` is confirmed to hold when the version's content includes transcluded linked material. Since version-create copies the reference set (which includes transcluded content identity references), and links are indexed by content identity, the version inherits link discoverability for all content — both native and transcluded.

**Concrete example:**
- Source: "Source with linked text here" — link on "linked"
- Doc: "Doc prefix: " + transclude("linked text" from Source)
- Version: version of Doc
- `find_links(Source)` → [link_id]
- `find_links(Doc)` → [link_id]
- `find_links(Version)` → [link_id] (survives versioning of transcluding document)

**Code references:** Test `version_transcluded_linked_content`

**Provenance:** Finding 0008

### INV-LINK-GLOBAL-VISIBILITY

**What happens:** Links in udanax-green are globally visible through content identity. A link created in any document is discoverable from every document in the system that shares the linked content's identity. This holds regardless of how the content identity was shared — transclusion, versioning, or transitive chains of both. This is not a new mechanism but an emergent invariant of the content-identity-based link model.

**Why it matters for spec:** This is a derived invariant that should be provable from existing axioms: `forall link, doc :: content_ids(link.source) ∩ content_ids(doc) ≠ ∅ ⟹ findable(link, doc)`. The formal spec should state this as a theorem rather than an axiom, since it follows from: (1) SS-LINK-ENDPOINT (links reference content identities), (2) SS-CONTENT-IDENTITY (content identity is shared, not copied), and (3) the definition of `find_links` as content-identity intersection. Finding 0008 provides the empirical confirmation across six scenarios covering transclusion, versioning, mixed chains, and multi-endpoint links.

**Code references:** All six passing scenarios in `golden/interactions/`: `transclude_linked_content`, `link_to_transcluded_then_version`, `version_add_link_check_original`, `transitive_link_discovery`, `link_both_endpoints_transcluded`, `version_transcluded_linked_content`

**Provenance:** Finding 0008
